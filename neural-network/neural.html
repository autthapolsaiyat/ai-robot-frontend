<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Network Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: #000;
        }

        .container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* Matrix Background */
        #matrix-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.3;
        }

        /* Neural Network Canvas */
        #neural-canvas {
            z-index: 1;
            border-radius: 10px;
        }

        /* Control Panel */
        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid rgba(0, 255, 136, 0.5);
            background: rgba(0, 0, 0, 0.7);
            color: #00ff88;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(0, 255, 136, 0.2);
            border-color: #00ff88;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .control-btn.active {
            background: rgba(0, 255, 136, 0.3);
            border-color: #00ff88;
        }

        /* Speed Slider */
        .speed-control {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            z-index: 100;
        }

        .speed-control label {
            color: #00ff88;
            font-size: 12px;
            display: block;
            margin-bottom: 8px;
        }

        .speed-slider {
            width: 150px;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(90deg, #00ff88, #00d4ff);
            outline: none;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.8);
        }

        /* Theme Selector */
        .theme-selector {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-btn:hover {
            transform: scale(1.2);
            border-color: #fff;
        }

        .theme-btn.active {
            border-color: #fff;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .theme-neon { background: linear-gradient(135deg, #ff00ff, #00ffff, #ffff00); }
        .theme-matrix { background: linear-gradient(135deg, #003300, #00ff00, #009900); }
        .theme-ocean { background: linear-gradient(135deg, #001a33, #0066cc, #00ccff); }
        .theme-fire { background: linear-gradient(135deg, #330000, #ff3300, #ff9900); }
        .theme-cyber { background: linear-gradient(135deg, #1a0033, #ff00ff, #00ffff); }

        /* Bottom Controls */
        .bottom-controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            z-index: 100;
        }

        .start-btn {
            padding: 15px 60px;
            font-size: 18px;
            font-weight: bold;
            color: #00ff88;
            background: transparent;
            border: 2px solid #00ff88;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .start-btn:hover {
            background: rgba(0, 255, 136, 0.2);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
            transform: scale(1.05);
        }

        .progress-container {
            width: 300px;
            height: 25px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 255, 136, 0.5);
            border-radius: 15px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ff88, #00d4ff, #ff00ff);
            border-radius: 15px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-text {
            color: #fff;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            position: absolute;
            width: 300px;
            text-align: center;
        }

        /* Status Display */
        .status-display {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 25px;
            border-radius: 20px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
            font-size: 14px;
            z-index: 100;
        }

        /* Fullscreen styles */
        .container:fullscreen {
            background: #000;
        }

        .container:-webkit-full-screen {
            background: #000;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 255, 136, 0.9);
            color: #000;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        <!-- Matrix Background -->
        <canvas id="matrix-bg"></canvas>
        
        <!-- Neural Network Canvas -->
        <canvas id="neural-canvas"></canvas>

        <!-- Status Display -->
        <div class="status-display">
            <span id="status-text">üß† Neural Network Ready</span>
        </div>

        <!-- Speed Control -->
        <div class="speed-control">
            <label>‚ö° SPEED: <span id="speed-value">1.0x</span></label>
            <input type="range" class="speed-slider" id="speed-slider" min="0.1" max="3" step="0.1" value="1">
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <button class="control-btn" id="fullscreen-btn" title="Fullscreen">‚õ∂</button>
            <button class="control-btn" id="pause-btn" title="Pause/Resume">‚è∏</button>
            <button class="control-btn" id="screenshot-btn" title="Screenshot">üì∑</button>
            <button class="control-btn" id="sound-btn" title="Sound">üîá</button>
        </div>

        <!-- Theme Selector -->
        <div class="theme-selector">
            <button class="theme-btn theme-neon active" data-theme="neon" title="Neon"></button>
            <button class="theme-btn theme-matrix" data-theme="matrix" title="Matrix"></button>
            <button class="theme-btn theme-ocean" data-theme="ocean" title="Ocean"></button>
            <button class="theme-btn theme-fire" data-theme="fire" title="Fire"></button>
            <button class="theme-btn theme-cyber" data-theme="cyber" title="Cyber"></button>
        </div>

        <!-- Bottom Controls -->
        <div class="bottom-controls">
            <button class="start-btn" id="start-btn">START PROCESS</button>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
                <span class="progress-text" id="progress-text">0%</span>
            </div>
        </div>

        <!-- Toast -->
        <div class="toast" id="toast"></div>
    </div>

    <!-- Audio Context for Sound Effects -->
    <script>
        // ============== CONFIGURATION ==============
        const themes = {
            neon: {
                nodeColors: ['#ff00ff', '#00ffff', '#ffff00', '#ff6600', '#00ff00', '#ff0066'],
                lineColor: 'rgba(0, 150, 255, 0.4)',
                glowColor: '#00ffff',
                matrixColor: '#00ff00'
            },
            matrix: {
                nodeColors: ['#00ff00', '#00cc00', '#009900', '#00ff66', '#33ff33', '#66ff66'],
                lineColor: 'rgba(0, 255, 0, 0.3)',
                glowColor: '#00ff00',
                matrixColor: '#00ff00'
            },
            ocean: {
                nodeColors: ['#00ccff', '#0099ff', '#0066cc', '#00ffff', '#3399ff', '#66ccff'],
                lineColor: 'rgba(0, 100, 200, 0.4)',
                glowColor: '#00ccff',
                matrixColor: '#0099ff'
            },
            fire: {
                nodeColors: ['#ff3300', '#ff6600', '#ff9900', '#ffcc00', '#ff0000', '#ff6633'],
                lineColor: 'rgba(255, 100, 0, 0.4)',
                glowColor: '#ff6600',
                matrixColor: '#ff3300'
            },
            cyber: {
                nodeColors: ['#ff00ff', '#cc00ff', '#9900ff', '#ff66ff', '#ff33cc', '#cc33ff'],
                lineColor: 'rgba(200, 0, 255, 0.4)',
                glowColor: '#ff00ff',
                matrixColor: '#ff00ff'
            }
        };

        let currentTheme = 'neon';
        let isPaused = false;
        let speed = 1;
        let soundEnabled = false;
        let isProcessing = false;
        let progress = 0;
        let audioCtx = null;

        // ============== MATRIX BACKGROUND ==============
        const matrixCanvas = document.getElementById('matrix-bg');
        const matrixCtx = matrixCanvas.getContext('2d');

        function resizeMatrix() {
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
        }
        resizeMatrix();

        const columns = Math.floor(matrixCanvas.width / 20);
        const drops = Array(columns).fill(1);

        function drawMatrix() {
            matrixCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);

            matrixCtx.fillStyle = themes[currentTheme].matrixColor;
            matrixCtx.font = '15px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = Math.random() > 0.5 ? '1' : '0';
                matrixCtx.fillText(text, i * 20, drops[i] * 20);

                if (drops[i] * 20 > matrixCanvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i] += speed;
            }
        }

        // ============== NEURAL NETWORK ==============
        const neuralCanvas = document.getElementById('neural-canvas');
        const ctx = neuralCanvas.getContext('2d');

        function resizeNeural() {
            neuralCanvas.width = Math.min(window.innerWidth * 0.7, 900);
            neuralCanvas.height = Math.min(window.innerHeight * 0.6, 600);
        }
        resizeNeural();

        // Network structure
        const layers = [8, 12, 16, 12, 8];
        let nodes = [];
        let pulses = [];

        function initNodes() {
            nodes = [];
            const width = neuralCanvas.width;
            const height = neuralCanvas.height;
            const layerSpacing = width / (layers.length + 1);

            layers.forEach((nodeCount, layerIndex) => {
                const x = layerSpacing * (layerIndex + 1);
                const nodeSpacing = height / (nodeCount + 1);

                for (let i = 0; i < nodeCount; i++) {
                    const y = nodeSpacing * (i + 1);
                    nodes.push({
                        x,
                        y,
                        layer: layerIndex,
                        radius: 8 + Math.random() * 4,
                        color: themes[currentTheme].nodeColors[Math.floor(Math.random() * themes[currentTheme].nodeColors.length)],
                        pulse: Math.random() * Math.PI * 2,
                        active: false
                    });
                }
            });
        }
        initNodes();

        function createPulse() {
            if (isPaused || !isProcessing) return;
            
            const startLayer = nodes.filter(n => n.layer === 0);
            const startNode = startLayer[Math.floor(Math.random() * startLayer.length)];
            
            pulses.push({
                x: startNode.x,
                y: startNode.y,
                targetLayer: 1,
                speed: 3 + Math.random() * 2,
                color: themes[currentTheme].nodeColors[Math.floor(Math.random() * themes[currentTheme].nodeColors.length)]
            });

            if (soundEnabled) playPulseSound();
        }

        function updatePulses() {
            pulses = pulses.filter(pulse => {
                const targetNodes = nodes.filter(n => n.layer === pulse.targetLayer);
                if (targetNodes.length === 0) return false;

                const target = targetNodes[Math.floor(Math.random() * targetNodes.length)];
                const dx = target.x - pulse.x;
                const dy = target.y - pulse.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 10) {
                    target.active = true;
                    setTimeout(() => target.active = false, 200);
                    
                    if (pulse.targetLayer < layers.length - 1) {
                        pulse.targetLayer++;
                        return true;
                    }
                    return false;
                }

                pulse.x += (dx / dist) * pulse.speed * speed;
                pulse.y += (dy / dist) * pulse.speed * speed;
                return true;
            });
        }

        function drawConnections() {
            ctx.strokeStyle = themes[currentTheme].lineColor;
            ctx.lineWidth = 1;

            for (let i = 0; i < layers.length - 1; i++) {
                const currentLayerNodes = nodes.filter(n => n.layer === i);
                const nextLayerNodes = nodes.filter(n => n.layer === i + 1);

                currentLayerNodes.forEach(node1 => {
                    nextLayerNodes.forEach(node2 => {
                        ctx.beginPath();
                        ctx.moveTo(node1.x, node1.y);
                        ctx.lineTo(node2.x, node2.y);
                        ctx.stroke();
                    });
                });
            }
        }

        function drawNodes() {
            nodes.forEach(node => {
                node.pulse += 0.05 * speed;
                const pulseRadius = node.radius + Math.sin(node.pulse) * 2;

                // Glow effect
                const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, pulseRadius * 2);
                gradient.addColorStop(0, node.active ? '#ffffff' : node.color);
                gradient.addColorStop(0.5, node.color + '80');
                gradient.addColorStop(1, 'transparent');

                ctx.beginPath();
                ctx.arc(node.x, node.y, pulseRadius * 2, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                // Main node
                ctx.beginPath();
                ctx.arc(node.x, node.y, pulseRadius, 0, Math.PI * 2);
                ctx.fillStyle = node.active ? '#ffffff' : node.color;
                ctx.fill();

                // Inner highlight
                ctx.beginPath();
                ctx.arc(node.x - pulseRadius * 0.3, node.y - pulseRadius * 0.3, pulseRadius * 0.3, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.fill();
            });
        }

        function drawPulses() {
            pulses.forEach(pulse => {
                ctx.beginPath();
                ctx.arc(pulse.x, pulse.y, 6, 0, Math.PI * 2);
                ctx.fillStyle = pulse.color;
                ctx.shadowColor = pulse.color;
                ctx.shadowBlur = 15;
                ctx.fill();
                ctx.shadowBlur = 0;
            });
        }

        function drawNeural() {
            ctx.clearRect(0, 0, neuralCanvas.width, neuralCanvas.height);
            drawConnections();
            drawNodes();
            drawPulses();
        }

        // ============== ANIMATION LOOP ==============
        let lastPulseTime = 0;

        function animate(timestamp) {
            if (!isPaused) {
                drawMatrix();
                
                if (timestamp - lastPulseTime > 200 / speed) {
                    createPulse();
                    lastPulseTime = timestamp;
                }
                
                updatePulses();
                drawNeural();
            }
            requestAnimationFrame(animate);
        }

        // ============== SOUND EFFECTS ==============
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playPulseSound() {
            if (!soundEnabled || !audioCtx) return;

            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.frequency.value = 200 + Math.random() * 400;
            oscillator.type = 'sine';

            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);

            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.1);
        }

        function playProcessSound() {
            if (!soundEnabled || !audioCtx) return;

            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.frequency.value = 440;
            oscillator.type = 'triangle';

            gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);

            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.5);
        }

        // ============== CONTROLS ==============
        const startBtn = document.getElementById('start-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const screenshotBtn = document.getElementById('screenshot-btn');
        const soundBtn = document.getElementById('sound-btn');
        const speedSlider = document.getElementById('speed-slider');
        const speedValue = document.getElementById('speed-value');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const statusText = document.getElementById('status-text');
        const toast = document.getElementById('toast');

        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        // Start/Stop Process
        startBtn.addEventListener('click', () => {
            if (!isProcessing) {
                isProcessing = true;
                progress = 0;
                startBtn.textContent = 'STOP PROCESS';
                statusText.textContent = '‚ö° Processing...';
                if (soundEnabled) playProcessSound();
                
                const progressInterval = setInterval(() => {
                    if (!isProcessing || progress >= 100) {
                        clearInterval(progressInterval);
                        if (progress >= 100) {
                            statusText.textContent = '‚úÖ Process Complete!';
                            startBtn.textContent = 'RESTART';
                            isProcessing = false;
                            showToast('üéâ Neural Network Process Complete!');
                        }
                        return;
                    }
                    progress += Math.random() * 2 * speed;
                    progress = Math.min(progress, 100);
                    progressBar.style.width = progress + '%';
                    progressText.textContent = Math.floor(progress) + '%';
                }, 100);
            } else {
                isProcessing = false;
                startBtn.textContent = 'START PROCESS';
                statusText.textContent = '‚èπ Process Stopped';
            }
        });

        // Pause/Resume
        pauseBtn.addEventListener('click', () => {
            isPaused = !isPaused;
            pauseBtn.textContent = isPaused ? '‚ñ∂' : '‚è∏';
            pauseBtn.classList.toggle('active', isPaused);
            statusText.textContent = isPaused ? '‚è∏ Paused' : 'üß† Neural Network Active';
            showToast(isPaused ? '‚è∏ Animation Paused' : '‚ñ∂ Animation Resumed');
        });

        // Fullscreen
        fullscreenBtn.addEventListener('click', () => {
            const container = document.getElementById('main-container');
            if (!document.fullscreenElement) {
                container.requestFullscreen().catch(err => console.log(err));
                showToast('‚õ∂ Fullscreen Mode');
            } else {
                document.exitFullscreen();
                showToast('‚õ∂ Exit Fullscreen');
            }
        });

        // Screenshot
        screenshotBtn.addEventListener('click', () => {
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = window.innerWidth;
            tempCanvas.height = window.innerHeight;
            const tempCtx = tempCanvas.getContext('2d');

            // Draw background
            tempCtx.fillStyle = '#000';
            tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
            tempCtx.drawImage(matrixCanvas, 0, 0);
            
            // Draw neural network centered
            const offsetX = (tempCanvas.width - neuralCanvas.width) / 2;
            const offsetY = (tempCanvas.height - neuralCanvas.height) / 2;
            tempCtx.drawImage(neuralCanvas, offsetX, offsetY);

            // Download
            const link = document.createElement('a');
            link.download = 'neural-network-' + Date.now() + '.png';
            link.href = tempCanvas.toDataURL();
            link.click();
            showToast('üì∑ Screenshot Saved!');
        });

        // Sound Toggle
        soundBtn.addEventListener('click', () => {
            initAudio();
            soundEnabled = !soundEnabled;
            soundBtn.textContent = soundEnabled ? 'üîä' : 'üîá';
            soundBtn.classList.toggle('active', soundEnabled);
            showToast(soundEnabled ? 'üîä Sound On' : 'üîá Sound Off');
        });

        // Speed Control
        speedSlider.addEventListener('input', (e) => {
            speed = parseFloat(e.target.value);
            speedValue.textContent = speed.toFixed(1) + 'x';
        });

        // Theme Selection
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTheme = btn.dataset.theme;
                
                // Update node colors
                nodes.forEach(node => {
                    node.color = themes[currentTheme].nodeColors[Math.floor(Math.random() * themes[currentTheme].nodeColors.length)];
                });
                
                // Update UI colors
                document.documentElement.style.setProperty('--glow-color', themes[currentTheme].glowColor);
                showToast('üé® Theme: ' + currentTheme.charAt(0).toUpperCase() + currentTheme.slice(1));
            });
        });

        // Window Resize
        window.addEventListener('resize', () => {
            resizeMatrix();
            resizeNeural();
            initNodes();
        });

        // Keyboard Shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key.toLowerCase()) {
                case 'f': fullscreenBtn.click(); break;
                case ' ': pauseBtn.click(); e.preventDefault(); break;
                case 's': screenshotBtn.click(); break;
                case 'm': soundBtn.click(); break;
                case 'enter': startBtn.click(); break;
            }
        });

        // Start Animation
        animate(0);
    </script>
</body>
</html>
